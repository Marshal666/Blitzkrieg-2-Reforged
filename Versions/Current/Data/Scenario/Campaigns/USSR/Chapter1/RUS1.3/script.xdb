<?xml version="1.0" encoding="UTF-8"?>
<Script ObjectRecordID="1000028">
	<FileName/>
	<ScriptText>--Evacuation--
opa = 0;
nom = {};
nom [1] = "Attack1"; nom [2] = "Attack2"; nom [3] = "Attack3";
function Evacuation1()
	while 1 do
		Wait(5);
		if GetNScriptUnitsInArea(3, "P1", 0) &gt; 0 then
		Cmd( 0 , 2 , 50 , GetScriptAreaParams ( "P3" ));
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P4") );
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P5") );
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "A0") );
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P5") );
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P4") );
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P3" ));
		QCmd( 0 , 2 , 50 , GetScriptAreaParams ( "P6" ));
		QCmd( ACT_ROTATE, 2 , 50 , GetScriptAreaParams ( "P3" ));
		StartThread( Evacuation2 );
		return 1;
		end;
	end;
end;
function Evacuation2()
	while 1 do
		Wait(5);
		if GetNScriptUnitsInArea(2, "P6", 0) &gt; 0 then
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P2" ));
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P3" ));
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P4") );
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P5") );
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "A0") );
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P5") );
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P4") );
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P3" ));
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P2" ));
		QCmd( 0 , 3 , 50 , GetScriptAreaParams ( "P1" ));
		QCmd( ACT_ROTATE, 3 , 50 , GetScriptAreaParams ( "P2" ));
		StartThread( Evacuation1 );
		return 1;
		end;
	end;
end;
-------------------------------------------Loose conditions 
function Attack()
	while 1 do
		a = Random(2);
		c = Random(3);
		b = 100 + c;
		LandReinforcementFromMap ( 1, nom[a], c, b );
		Wait (2);
		Cmd( 3 , b , 50 , GetScriptAreaParams ( "A" .. c) );
		QCmd( 3 , b , 50 , GetScriptAreaParams ( "A0") );
		QCmd( 3 , b , 50 , GetScriptAreaParams ( "Exit") );
		Wait(6);
		LandReinforcementFromMap ( 1, "Attack3", c, 200 );
		Cmd( 3 , 200, 50 , GetScriptAreaParams ( "A" .. c) );
		QCmd( 3 , 200, 50 , GetScriptAreaParams ( "A0") );
		Wait ( 200 + Random(60));
	end;
end;
function Caput()

    while 1 do
        Wait ( 3 );
        if (GetNUnitsInScriptGroup( 1, 3 ) &lt; 5 and opa == 0) then
        FailObjective( 0 );
		Wait(3);
		Win(1);
		return 1;
		end;
	end;

end;

-------------------------------------------Win conditions

function Victory ()

    while 1 do
        Wait ( 3 );
        if GetNScriptUnitsInArea(1, "Exit", 0) &gt; 0 then
        opa = 1;
        Wait(1);
        RemoveScriptGroup(1);
        Wait(10);
        CompleteObjective( 0 );
        Wait (3);
        Win (0);
        return 1;
        end;
    end;
end;
-------------------------------------------------Main
Wait (3);
StartThread( Evacuation1 );
GiveObjective( 0 );
StartThread( Caput );
StartThread( Victory );
StartThread( Attack );
Wait(900 + Random(300));
Cmd( 0 , 1 , 50 , GetScriptAreaParams ( "Exit" ) );
</ScriptText>
</Script>
